<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Scan & Sip</title>
  <link rel="stylesheet" href="css_juguitos.css" />
</head>
<body>
  <header>
    <div>Scan & Sip</div>
    <div><a href="sing_in.html" class="button">Sign In</a></div>
  </header>

  <section class="textoprincipal">
    <div class="textoprincipal-text">
      <h1>ESCANEÁ,<br>DESCUBRÍ<br>Y ELEGÍ MEJOR</h1>
      <p>Accede aquí para escanear tu producto y descubrir su información nutricional</p>
      <button onclick="buscarJugo()">ESCANEÁ AQUÍ</button>
<script>
function buscarJugo() {
    window.location.href = "busca_jugos.html";
}
</script>
    </div>
    <div class="textoprincipal-image">
      <img src="images/jugos.jpg" alt="Jugos en caja">
    </div>
  </section>

  <section class="accesorios">
  <div class="lista" onclick="mostrarSeccion('biblioteca'); window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });">BIBLIOTECA</div>
  <div class="lista" onclick="mostrarSeccion('comparador'); window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });">COMPARADOR</div>
  <div class="lista" onclick="mostrarSeccion('logros'); window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });">LOGROS</div>
</section>

  <!-- SECCIONES OCULTAS/MOSTRADAS -->
  <section id="biblioteca" class="seccion">
    <h2>BIBLIOTECA</h2>
    <ul>
      <li><a href="https://www.gub.uy/ministerio-salud-publica/sites/ministerio-salud-publica/files/documentos/campanas/MSP_GUIA_ALIMENTARIA_POBLACION.pdf " target="_blank">Las claves en tu día a día para alcanzar una alimentación saludable </a><small> Material del MSP que busca fomentar una alimentación saludable, así como promover la práctica de actividad física para prevenir enfermedades.</small></li>
      <li><a href="https://www.who.int/es/news-room/fact-sheets/detail/healthy-diet" target="_blank">Directrices sobre el consumo de azúcar – OMS</a><small> Recomendación directa sobre azúcares.</small></li>
      <li><a href="https://www.cdc.gov/nutrition/data-statistics/sugar-sweetened-beverages-intake.html " target="_blank">Get the facts: Sugar-sweetened beverages – CDC </a><small> Información del CDC (Centro para el Control y la Prevención de Enfermedades – EE.UU.) en inglés.</small></li>
    </ul>
  </section>

  <section id="comparador" class="seccion">
    <h2>COMPARADOR</h2>
    <div class="comparador-form">
      <label for="codigo1">Código Jugo 1:</label>
      <input type="text" id="codigo1" placeholder="Ej: 123">
      <label for="codigo2">Código Jugo 2:</label>
      <input type="text" id="codigo2" placeholder="Ej: 456">
      <button onclick="compararPorCodigo()">Comparar</button>
    </div>
    <div id="resultado-comparador"></div>
  </section>

  <section id="logros" class="seccion">
    <h2>LOGROS</h2>
    <p>Contenido exclusivo de logros.</p>
  </section>

  <script src="javas.js"></script>
  <script>
// Datos de ejemplo: puedes agregar más jugos y datos reales
const jugos = {
  "123": { nombre: "Naranja", azucar: "8g", calorias: "40kcal", vitaminaC: "30mg" },
  "456": { nombre: "Manzana", azucar: "10g", calorias: "45kcal", vitaminaC: "10mg" },
  "789": { nombre: "Multifruta", azucar: "12g", calorias: "50kcal", vitaminaC: "20mg" }
};

async function compararPorCodigo() {
  const cod1 = document.getElementById('codigo1').value.trim();
  const cod2 = document.getElementById('codigo2').value.trim();
  const resultado = document.getElementById('resultado-comparador');

  if (!cod1 || !cod2) {
    resultado.innerHTML = "<p style='color:red;'>Por favor, ingresa ambos códigos.</p>";
    return;
  }

  resultado.innerHTML = "Buscando información...";

  try {
    // Pedir ambos productos en paralelo
    const [res1, res2] = await Promise.all([
      fetch(`https://world.openfoodfacts.org/api/v0/product/${cod1}.json`),
      fetch(`https://world.openfoodfacts.org/api/v0/product/${cod2}.json`)
    ]);
    const [data1, data2] = await Promise.all([res1.json(), res2.json()]);

    // Verificar si ambos existen
    if (data1.status !== 1 || data2.status !== 1) {
      resultado.innerHTML = "<p style='color:red;'>Uno o ambos códigos no existen en la base de datos.</p>";
      return;
    }

    // Adaptar los datos al formato esperado
    const info1 = {
      nombre: data1.product.product_name || 'Sin nombre',
      azucar: data1.product.nutriments?.sugars_100g ? `${data1.product.nutriments.sugars_100g}g` : 'No disponible',
      calorias: data1.product.nutriments?.['energy-kcal_100g'] ? `${data1.product.nutriments['energy-kcal_100g']} kcal` : 'No disponible',
      vitaminaC: data1.product.nutriments?.vitamin_c_100g ? `${data1.product.nutriments.vitamin_c_100g}mg` : 'No disponible'
    };
    const info2 = {
      nombre: data2.product.product_name || 'Sin nombre',
      azucar: data2.product.nutriments?.sugars_100g ? `${data2.product.nutriments.sugars_100g}g` : 'No disponible',
      calorias: data2.product.nutriments?.['energy-kcal_100g'] ? `${data2.product.nutriments['energy-kcal_100g']} kcal` : 'No disponible',
      vitaminaC: data2.product.nutriments?.vitamin_c_100g ? `${data2.product.nutriments.vitamin_c_100g}mg` : 'No disponible'
    };

    resultado.innerHTML = `
      <div style="background-color: #FFD74F; padding: 15px; border-radius: 15px; margin-bottom: 15px; overflow-x: auto;">
        <table border="1" style="margin-top:10px; width:100%; border-collapse:collapse; border-radius: 10px; overflow: hidden;">
          <tr>
            <th></th>
            <th>${info1.nombre}</th>
            <th>${info2.nombre}</th>
          </tr>
          <tr>
            <td>Azúcar</td>
            <td>${info1.azucar}</td>
            <td>${info2.azucar}</td>
          </tr>
          <tr>
            <td>Calorías</td>
            <td>${info1.calorias}</td>
            <td>${info2.calorias}</td>
          </tr>
          <tr>
            <td>Vitamina C</td>
            <td>${info1.vitaminaC}</td>
            <td>${info2.vitaminaC}</td>
          </tr>
        </table>
      </div>
    `;
  } catch (error) {
    resultado.innerHTML = `<p style='color:red;'>Error al buscar los productos. Intenta nuevamente.</p>`;
  }
}
</script>
</body>

</html>